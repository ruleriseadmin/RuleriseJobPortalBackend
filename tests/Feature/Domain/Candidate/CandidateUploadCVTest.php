<?php

use Database\Seeders\RoleSeeder;
use App\Models\Domain\Candidate\User;
use Illuminate\Support\Facades\Storage;

beforeEach(function () {
    $this->seed(RoleSeeder::class);
});

test('That candidate upload cv successfully', function () {

    $user = User::factory()->create();

    Storage::fake('public');

    $response = $this->actingAs($user)->post('/v1/candidate/cv/upload', [
        'documentInBase64' => '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',
        'documentExtension' => 'pdf',
    ]);

    expect($response['status'])->toBe('200');

    Storage::assertExists("public/cv/{$user->email}-curriculum-vitae.pdf");

    $user = $user->refresh();

    expect($user->cv->cv_document_url)->toBe("cv/{$user->email}-curriculum-vitae.pdf");

    Storage::delete("public/{$user->cv->cv_document_url}");
});
